<% content_for :title, "My Trips - Flip the Joy" %>

<div class="container">
  <h1>My Trips</h1>
  <% if @my_trips.any? %>
    <table class="trips-table">
      <thead>
        <tr>
          <th></th>
          <th>Destination</th>
          <th>Start Time</th>
          <th>End Time</th>
          <th>Meeting Point</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @my_trips.each do |my_trip| %>
          <tr>
            <td>
              <% if my_trip.trip.image.present? %>
                <%= image_tag my_trip.trip.image.url, class: "trip-thumbnail" %>
              <% else %>
                <span class="no-image-placeholder">No Image</span>
              <% end %>
            </td>
            <td><%= my_trip.trip.destination %></td>
            <td><%= format_datetime(my_trip.trip.start_time) %></td>
            <td><%= format_datetime(my_trip.trip.end_time) %></td>
            <td><%= my_trip.trip.meeting_point %></td>

            <td><%= link_to 'View Trip', trip_path(my_trip.trip), class: "button-secondary" %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p class="text-center mb-3 mt-3">You have not booked any trips yet.</p>
  <% end %>
  <div class="actions home-centered">
    <%= link_to current_user&.is_travel_agent? ? 'Back to Open Trips' : 'Back to Available Trips', open_trips_path, class: "button-secondary" %>
  </div>
</div>